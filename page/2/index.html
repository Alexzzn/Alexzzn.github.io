<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>MyBlog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="我的博客分享">
<meta property="og:type" content="website">
<meta property="og:title" content="MyBlog">
<meta property="og:url" content="https://Alexzzn.github.io/page/2/index.html">
<meta property="og:site_name" content="MyBlog">
<meta property="og:description" content="我的博客分享">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MyBlog">
<meta name="twitter:description" content="我的博客分享">
  
    <link rel="alternate" href="/atom.xml" title="MyBlog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://Alexzzn.github.io"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">MyBlog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">博客</a>
        </h2>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-iOS/ruby安装错误总结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/18/iOS/ruby安装错误总结/" class="article-date">
  <time datetime="2018-07-18T10:10:21.186Z" itemprop="datePublished">2018-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/18/iOS/ruby安装错误总结/">ruby安装错误总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <blockquote>
<p>1，安装后 如何卸载系统自带的ruby2.0版本库，从新从官网下载 源码编译，要确保ruby，brew，gem，homebrew目录和文件 清理干净，可通过 which gem </p>
</blockquote>
<blockquote>
<p>2，安装时根据错误提示 加权限或者 清除重复目录，编译可能出现 xcode gcc 版本 和 系统不兼容 ，可以下载 相对应的 term 终端 版本的gcc。<a href="developer.apple.com/download/more/?=for%20Xcode">下载地址</a></p>
</blockquote>
<blockquote>
<p>3，成功后 通过ruby 安装 brew，</p>
<p>ruby -e “$(curl -fsSL <a href="https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;" target="_blank" rel="noopener">https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alexzzn.github.io/2018/07/18/iOS/ruby安装错误总结/" data-id="cjjsawxft00351m536lg4awm1" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-iOS/Block_OC_2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/18/iOS/Block_OC_2/" class="article-date">
  <time datetime="2018-07-18T10:10:21.184Z" itemprop="datePublished">2018-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/18/iOS/Block_OC_2/">Block_OC_2</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>本文翻译自苹果的文档，有删减，也有添加自己的理解部分。</p>
<p>如果有Block语法不懂的，可以参考fuckingblocksyntax，里面对于Block</p>
<p>为了方便对比，下面的代码我假设是写在ViewController子类中的</p>
<p>1、第一部分</p>
<p>//定义和使用Block，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">- ( void )testBlock &#123;</span><br><span class="line"></span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    //（1）定义无参无返回值的Block</span><br><span class="line">    void (^printBlock)() = ^()&#123;</span><br><span class="line">        printf ( &quot;no number&quot; );</span><br><span class="line">    &#125;;</span><br><span class="line">    printBlock();</span><br><span class="line">    printBlock(9);</span><br><span class="line">    int mutiplier = 7;</span><br><span class="line">    //（3）定义名为myBlock的代码块，返回值类型为int</span><br><span class="line">    int (^myBlock)( int ) = ^( int num)&#123;</span><br><span class="line">        return num*mutiplier;</span><br><span class="line">    &#125;;</span><br><span class="line">    //使用定义的myBlock</span><br><span class="line">    int newMutiplier = myBlock(3);</span><br><span class="line">    printf ( &quot;newMutiplier is %d&quot; ,myBlock(3));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//（2）定义一个有参数，没有返回值的Block</span><br><span class="line">void (^printNumBlock)( int ) = ^( int num)&#123;</span><br><span class="line">    printf ( &quot;int number is %d&quot; ,num);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>（1）在类中，定义一个Block变量，就像定义一个函数；</p>
<p>（2）Block可以定义在方法内部，也可以定义在方法外部；</p>
<p>（3）只有调用Block时候，才会执行其{}体内的代码；</p>
<p>（PS：关于第（2）条，定义在方法外部的Block，其实就是文件级别的全局变量）</p>
<p>那么在类中定义一个Block，特别是在-viewDidLoad方法体内定义一个Block到底有什么意义呢？我表示这时候只把它当做私有函数就可以了。我之前说过，Block其实就相当于代理，那么这时候我该怎样将其与代理类比以了解呢。这时候我可以这样说：本类中的Block就相当于类自己服从某个协议，然后让自己代理自己去做某个事情。很拗口吧？看看下面的代码，</p>
<p>// 定义一个协议<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">@<span class="class"><span class="keyword">protocol</span> <span class="title">ViewControllerDelegate</span></span></span><br><span class="line"><span class="class">- ( <span class="title">void</span> )<span class="title">selfDelegateMethod</span>;</span></span><br><span class="line"><span class="class">  @<span class="title">end</span></span></span><br><span class="line"><span class="class">  //本类实现这个协议<span class="title">ViewControllerDelegate</span></span></span><br><span class="line"><span class="class">  @<span class="title">interface</span> <span class="title">ViewController</span> ()</span></span><br><span class="line"><span class="class">  @<span class="title">property</span> (<span class="title">nonatomic</span>, <span class="title">assign</span>) <span class="title">id</span>  <span class="title">delegate</span>;</span></span><br><span class="line"><span class="class">  @<span class="title">end</span></span></span><br><span class="line"><span class="class">  //接着在-<span class="title">viewDidLoad</span>中的代码如下，</span></span><br><span class="line"><span class="class">- ( <span class="title">void</span> )<span class="title">viewDidLoad</span> </span>&#123;</span><br><span class="line">  	[<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">  	<span class="comment">// Do any additional setup after loading the view from its nib.</span></span><br><span class="line">  	<span class="keyword">self</span>.delegate = <span class="keyword">self</span>;</span><br><span class="line">  	<span class="keyword">if</span> 		(<span class="keyword">self</span>.delegate &amp;&amp; [<span class="keyword">self</span>.delegate respondsToSelector:@selector(selfDelegateMethod)]) &#123;</span><br><span class="line">  		[<span class="keyword">self</span>.delegate selfDelegateMethod];</span><br><span class="line">  	&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">###pragma mark - <span class="type">ViewControllerDelegate</span> method</span><br><span class="line"><span class="comment">//实现协议中的方法</span></span><br><span class="line">- ( void )selfDelegateMethod &#123;</span><br><span class="line">  <span class="type">NSLog</span>(@ <span class="string">"自己委托自己实现的方法"</span> );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>  看出这种写法的奇葩地方了吗？自己委托自己去实现某个方法，而不是委托别的类去实现某个方法。本类中定义的一个Block其实就是闲的蛋疼，委托自己去字做某件事情，实际的意义不大，所以你很少看见别人的代码直接在类中定义Block然后使用的，Block很多的用处是跨越两个类来使用的，比如作为property属性或者作为方法的参数，这样就能跨越两个类了。</p>
<p>2、第二部分</p>
<p>__block关键字的使用</p>
<p>在Block的{}体内，是不可以对外面的变量进行更改的，比如下面的语句，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- ( void )viewDidLoad</span><br><span class="line">  &#123;</span><br><span class="line">  //将Block定义在方法内部</span><br><span class="line">  __block int x = 100;</span><br><span class="line">  void (^sumXAndYBlock)( int ) = ^( int y)&#123;</span><br><span class="line">  		x = x+y;</span><br><span class="line">  		printf ( &quot;new x value is %d&quot; ,x);</span><br><span class="line">  	&#125;;</span><br><span class="line">  	sumXAndYBlock(50);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p>3、第三部分：Block作为property属性实现页面之间传值</p>
<p>需求：在ViewController中，点击Button，push到下一个页面NextViewController，在NextViewController的输入框TextField中输入一串字符，返回的时候，在ViewController的Label上面显示文字内容，</p>
<p>（1）第一种方法：首先看看通过“协议/代理”是怎么实现两个页面之间传值的吧，</p>
<p>//NextViewController是push进入的第二个页面<br>//NextViewController.h 文件<br>//定义一个协议，前一个页面ViewController要服从该协议，并且实现协议中的方法<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">  @<span class="class"><span class="keyword">protocol</span> <span class="title">NextViewControllerDelegate</span> </span></span><br><span class="line"><span class="class">  - ( <span class="title">void</span> )<span class="title">passTextValue</span>:(<span class="title">NSString</span> *)<span class="title">tfText</span>;</span></span><br><span class="line"><span class="class">  @<span class="title">end</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  @<span class="title">interface</span> <span class="title">NextViewController</span> : <span class="title">UIViewController</span></span></span><br><span class="line"><span class="class">  @<span class="title">property</span> (<span class="title">nonatomic</span>, <span class="title">assign</span>) <span class="title">id</span>  <span class="title">delegate</span>;</span></span><br><span class="line"><span class="class">  @<span class="title">end</span></span></span><br><span class="line"><span class="class">  //<span class="title">NextViewController</span>.<span class="title">m</span> 文件</span></span><br><span class="line"><span class="class">  //点击<span class="title">Button</span>返回前一个<span class="title">ViewController</span>页面</span></span><br><span class="line"><span class="class">- (<span class="title">IBAction</span>)<span class="title">popBtnClicked</span>:(<span class="title">id</span>)<span class="title">sender</span> </span>&#123;</span><br><span class="line">  		<span class="keyword">if</span> 	(<span class="keyword">self</span>.delegate &amp;&amp; [<span class="keyword">self</span>.delegate respondsToSelector:@selector(passTextValue:)]) &#123;</span><br><span class="line">  <span class="comment">//self.inputTF是该页面中的TextField输入框</span></span><br><span class="line">  		[<span class="keyword">self</span>.delegate passTextValue:<span class="keyword">self</span>.inputTF.text];</span><br><span class="line">  &#125;</span><br><span class="line">  		[<span class="keyword">self</span>.navigationController popViewControllerAnimated:<span class="type">YES</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  接下来我们在看看<span class="type">ViewController</span>文件中的内容，</span><br><span class="line">  <span class="comment">//ViewController.m 文件</span></span><br><span class="line">  @interface <span class="type">ViewController</span> ()</span><br><span class="line">  @property (strong, nonatomic) <span class="type">IBOutlet</span> <span class="type">UILabel</span> *nextVCInfoLabel;</span><br><span class="line">  @end</span><br><span class="line">  <span class="comment">//点击Button进入下一个NextViewController页面</span></span><br><span class="line">- (<span class="type">IBAction</span>)btnClicked:(id)sender</span><br><span class="line">  &#123;</span><br><span class="line">  	<span class="type">NextViewController</span> *nextVC = [[<span class="type">NextViewController</span> alloc] initWithNibName:@ <span class="string">"NextViewController"</span> bundle:<span class="literal">nil</span>];</span><br><span class="line">  		nextVC.delegate = <span class="keyword">self</span>; <span class="comment">//设置代理</span></span><br><span class="line">  		[<span class="keyword">self</span>.navigationController pushViewController:nextVC animated:<span class="type">YES</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//实现协议NextViewControllerDelegate中的方法</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark - NextViewControllerDelegate method</span><br><span class="line">- ( void )passTextValue:(NSString *)tfText</span><br><span class="line">  &#123;</span><br><span class="line">  //self.nextVCInfoLabel是显示NextViewController传递过来的字符串Label对象</span><br><span class="line">  self.nextVCInfoLabel.text = tfText;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>（2）第二种方法：使用Block作为property，实现两个页面之间传值，</p>
<pre><code>先看看NextViewController文件中的内容，
</code></pre><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//NextViewController.h 文件</span></span><br><span class="line">@interface <span class="type">NextViewController</span> : <span class="type">UIViewController</span></span><br><span class="line">@property (nonatomic, copy)  void (^<span class="type">NextViewControllerBlock</span>)(<span class="type">NSString</span> *tfText);</span><br><span class="line">@end</span><br><span class="line"><span class="comment">//NextViewContorller.m 文件</span></span><br><span class="line">- (<span class="type">IBAction</span>)popBtnClicked:(id)sender &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">self</span>.<span class="type">NextViewControllerBlock</span>) &#123;</span><br><span class="line">  <span class="keyword">self</span>.<span class="type">NextViewControllerBlock</span>(<span class="keyword">self</span>.inputTF.text);</span><br><span class="line">  &#125;</span><br><span class="line">  [<span class="keyword">self</span>.navigationController popViewControllerAnimated:<span class="type">YES</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  再来看看<span class="type">ViewController</span>文件中的内容，</span><br><span class="line">- (<span class="type">IBAction</span>)btnClicked:(id)sender</span><br><span class="line">  &#123;</span><br><span class="line">  <span class="type">NextViewController</span> *nextVC = [[<span class="type">NextViewController</span> alloc] initWithNibName:@ <span class="string">"NextViewController"</span> bundle:<span class="literal">nil</span>];</span><br><span class="line">  nextVC.<span class="type">NextViewControllerBlock</span> = ^(<span class="type">NSString</span> *tfText)&#123;</span><br><span class="line">  [<span class="keyword">self</span> resetLabel:tfText];</span><br><span class="line">  &#125;;</span><br><span class="line">  [<span class="keyword">self</span>.navigationController pushViewController:nextVC animated:<span class="type">YES</span>];</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">####pragma mark - NextViewControllerBlock method</span><br><span class="line">- ( void )resetLabel:(NSString *)textStr</span><br><span class="line">  &#123;</span><br><span class="line">  		self.nextVCInfoLabel.text = textStr;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>  好了就这么多代码，可以使用Block来实现两个页面之间传值的目的，实际上就是取代了Delegate的功能。</p>
<p>另外，博客中的代码Sample Code可以再Github下载，如果因为Github被墙了，可以在终端使用git clone + 完整链接，即可克隆项目到本地。</p>
<p>Github中的代码，可以开启两种调试模式，你需要在项目的配置文件BlockSamp-Prefix.pch中注释或者解注释下面的代码，</p>
<p>####define Debug_BlcokPassValueEnable<br>即可开启两种调试的方式，如果注释了上面的语句就是使用Delegate进行调试；否则使用Block进行调试。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alexzzn.github.io/2018/07/18/iOS/Block_OC_2/" data-id="cjjsawxf3001v1m53y8kvtzvj" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-iOS/R.Swift简要" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/18/iOS/R.Swift简要/" class="article-date">
  <time datetime="2018-07-18T10:10:21.183Z" itemprop="datePublished">2018-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/18/iOS/R.Swift简要/">R</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h4 id="RSwift-简要说明"><a href="#RSwift-简要说明" class="headerlink" title="RSwift 简要说明"></a>RSwift 简要说明</h4><blockquote>
<p>配置脚本 尽量保持runscript 执行靠前<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 执行script</span><br><span class="line">&quot;$PODS_ROOT/R.swift/rswift&quot; generate &quot;$SRCROOT/MYCard/Support Files&quot;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>支持的资源类型</p>
<ul>
<li>图片</li>
<li>nib，xib，storyboard</li>
<li>数据文件</li>
<li>font</li>
<li>color<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">R.image.image_test()</span><br><span class="line">R.file.dataFileJson.path()</span><br><span class="line">R.font.chalkduster(size: 35</span><br><span class="line">R.color.myAppColor.red()</span><br><span class="line">R.nib.tanTableViewCell()</span><br><span class="line">R.nib.tanTableViewCell.identifier</span><br><span class="line">performSegueWithIdentifier(R.segue.openSettings)</span><br><span class="line">R.string.localizable.welcomeMessage()</span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alexzzn.github.io/2018/07/18/iOS/R.Swift简要/" data-id="cjjsawxfc002b1m5314qtu4hh" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-iOS/Block_OC_1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/18/iOS/Block_OC_1/" class="article-date">
  <time datetime="2018-07-18T10:10:21.181Z" itemprop="datePublished">2018-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/18/iOS/Block_OC_1/">Block_OC_1</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h4 id="mongoDb常用语句"><a href="#mongoDb常用语句" class="headerlink" title="mongoDb常用语句"></a>mongoDb常用语句</h4><p>本文来自台湾的某开发人员的博客，被墙，感觉讲的比较易懂，所以引过来。文字简体化了，原来是繁体，变数=变量，这个注意一下。</p>
<p>本文的顺序是层层深入的，要想简单的了解，只看X.1 初探Block就好了</p>
<p>本章学习目标：</p>
<blockquote>
<p>\1. 了解何谓block。</p>
<p>\2. 了解block的使用方法。</p>
<p>Block 是iOS在4.0之后新增的程式语法，严格来说block的概念并不算是基础程式设计的范围，对初学者来说也不是很容易了解，但是在iOS SDK 4.0之后，block几乎出现在所有新版的API之中，换句话说，如果不了解block这个概念就无法使用SDK 4.0版本以后的新功能，因此虽然block本身的语法有点难度，但为了使用iOS的新功能我们还是得硬着头皮去了解这个新的程式概念。</p>
<p>在这一章的目标以了解如何使用block为主而不深入探讨block底层的运作方式，至于有些初学者较少遇到的辞汇如「词法作用域（lexical scope）」等，本章将不再多做解释，待有兴趣的读者去请教Google大神吧。</p>
</blockquote>
<p>X.1 初探Block</p>
<p>在这一小节我们先用一些简单范例来导入block的概念。</p>
<blockquote>
<p>X.1.1 宣告和使用Block</p>
<p>我们使用「^」运算子来宣告一个block变数，而且在block的定义最后面要加上「;」来表示一个完整的述句（也就是将整个block定义视为前面章节所介绍的简单述句，因为整个定义必须是一个完整的句子，所以必须在最后面加上分号），下面是一个block的范例：</p>
</blockquote>
<p>   1:int multiplier = 7 ;<br>   2:int (^myBlock)( int ) = ^( int num)<br>   3: {<br>   4:return num * multiplier;<br>   5: };</p>
<blockquote>
<p>我们使用下图来解释这个范例(请将文字框的字翻译如下)：<br>我们宣告一个「myBlock」变数，用「^」符号来表示这是一个block。<br>这是block的完整定义，这个定义将会指定给「myBlock」变数<br>表示「myBlock」是一个回传值为整数（int）的block。<br>它有一个参数，型态也是整数。<br>这个参数的名字叫做「num」。<br>这是block的内容。<br>值得注意的地方是block可以使用和本身定义范围相同的变数，可以想像在上面的例子中 multiplier 和 myBlock 都是某一个函数内定义的两个变数也就是这个变数都在某个函数两个大括号「{」和「 }」中间的区块，因为它们的有效范围是相同的，因此在block中就可以直接使用 multiplier 这个变数，此外当把block定义成一个变数的时，我们可以直接像使用一般函数般的方式使用它：<br>objective-c<br>   1:int multiplier = 7 ;<br>   2:int (^myBlock)( int ) = ^( int num)<br>   3: {<br>   4:return num * multiplier;<br>   5: };<br>   6: printf ( “%d” , myBlock( 3 ));X.1.2 直接使用Bloc</p>
</blockquote>
<blockquote>
<p>K在很多情况下，我们并不需要将block宣告成变数，反之我们可以直接在需要使用block的地方直接用内嵌的方式将block的内容写出来，在下面的例子中qsort_b函数，这是一个类似传统的qsort_t函数，但是直接使用block做为它的参数：<br>objective-c<br>   1:char <em>myCharacters[ 3 ] = { “TomJohn” , “George” , “Charles Condomine” };<br>   2: qsort_b (myCharacters, 3 ,<br>   3:sizeof ( char </em>),<br>   4:          ^( constvoid <em>l, constvoid </em>r)//block部分<br>   5:             {<br>   6:char <em>left = </em>( char <strong>)l;<br>   7:char <em>right = </em>( char </strong>)r;<br>   8:return strncmp (left, right, 1 );<br>   9:             }                            //end<br>  10: );</p>
</blockquote>
<blockquote>
<p>X.1.3 __block 变量</p>
<p>一般来说，在block内只能读取在同一个作用域的变数而且没有办法修改在block外定义的任何变数，此时若我们想要这些变数能够在block中被修改，就必须在前面挂上<strong>block的修饰词，以上面第一个例子中的 multiplier 来说，这个变数在 block 中是唯读的，所以 multiplier = 7 指定完后，在 block 中的 multiplier 就只能是 7 不能修改，若我们在 block 中修改 multiplier ，在编辑时就会产生错误，因此若想要在 block 中修改 multiplier ，就必须在 multiplier 前面加上 </strong>block 的修饰词，请参考下面的范例：<br>objective-c<br>    __block int multiplier = 7 ;<br>    int (^myBlock)( int ) = ^( int num) {<br>        if (num &gt; 5 ) {<br>        multiplier = 7<br>    } else {<br>        multiplier =5<br>    }</p>
</blockquote>
<p>  return num * multiplier;<br>};</p>
<p>X.2 Block 概要</p>
<p>Block 提供我们一种能够将函数程式码内嵌在一般述句中的方法，在其他语言中也有类似的概念称做「closure」，但是为了配合Objective-C的贯例，我们一律将这种用法称为「block」</p>
<blockquote>
<p>X.2.1 Block 的功能</p>
<p>Block 是一种具有匿名功能的内嵌函数，它的特性如下：</p>
<p>如一般的函数般能拥有带有型态的参数。</p>
<p>拥有回传值。</p>
<p>可以撷取被定义的词法作用域（lexical scope）状态。</p>
<p>可以选择性地修改词法作用域的状态。</p>
<p>注：词法作用域（lexical scope）可以想像成是某个函数两个大括号中间的区块，这个区块在程式执行时，系统会将这个区块放入堆叠记忆体中，在这个区块中的宣告的变数就像是我们常听到的区域变数，当我们说block可以撷取同一词法作用域的状态时可以想像block变数和其他区域变数是同一个层级的区域变数（位于同一层的堆叠里），而block的内容可以读取到和他同一层级的其他区域变数。</p>
<p>我们可以拷贝一个block，也可以将它丢到其他的执行绪中使用，基本上虽然block在iOS程式开发中可以使用在C/C++开发的程式片段，也可以在Objective-C中使用，不过在系统的定义上，block永远会被视为是一个Objective-C的物件。</p>
<p>X.2.2 Block 的使用时机</p>
<p>Block 一般是用来表示、简化一小段的程式码，它特别适合用来建立一些同步执行的程式片段、封装一些小型的工作或是用来做为某一个工作完成时的回传呼叫（callback） 。</p>
<p>在新的iOS API中block被大量用来取代传统的delegate和callback，而新的API会大量使用block主要是基于以下两个原因：</p>
<p>可以直接在程式码中撰写等会要接着执行的程式，直接将程式码变成函数的参数传入函数中，这是新API最常使用block的地方。</p>
<p>可以存取区域变数，在传统的callback实作时，若想要存取区域变数得将变数封装成结构才能使用，而block则是可以很方便地直接存取区域变数。</p>
</blockquote>
<p>X.3 宣告和建立Block</p>
<blockquote>
<p>X.3.1 宣告Block的参考（Reference）</p>
<p>Block 变数储存的是一个block的参考，我们使用类似宣告指标的方式来宣告，不同的是这时block变数指到的地方是一个函数，而指标使用的是「<em>」，block则是使用「^」来宣告，下面是一些合法的block宣告：<br>objective-c<br>   1:/</em> 回传void ，参数也是void 的block*/<br>   2:void (^blockReturningVoidWithVoidArgument)( void );</p>
</blockquote>
<p>   3:/<em> 回传整数，两个参数分别是整数和字元型态的block</em>/</p>
<p>   4:int   (^blockReturningIntWithIntAndCharArguments)( int , char );</p>
<p>   5:/<em> 回传void ，含有10 个block 的阵列，每个block 都有一个型态为整数的参数</em>/</p>
<p>   6:void (^arrayOfTenBlocksReturningVoidWinIntArgument[ 10 ])( int );</p>
<p>   7: X.3.2 建立一个Block<br>   8:<br>   9: 我们使用「^」来开始一个block，并在最后使用「;」来表示结束，下面的范例示范了一个block变数，然后再定义一个block把它指定给block变数： </p>
<p>  10:</p>
<p>  11:int (^oneFrom)( int ); /<em> 宣告block 变数</em>/<br>  12:/<em> 定义block 的内容并指定给上面宣告的变数</em>/objective-c<br>  13:     oneFrom = ^(int anInt)</p>
<p>  14:                 {</p>
<p>  15:return anInt = - 1 ; </p>
<p>  16:                 };</p>
<blockquote>
<p>X.3.3 全域的Block</p>
<p>我在可以在档案中宣告一个全域的block，请参考以下范例：</p>
</blockquote>
<p>   1:int GlobalInt = 0 ;</p>
<p>   2:int (^getGlobalInt)( void ) = ^ ( void ) { return GlobalInt ;};</p>
<p>X.4 Block 和变量</p>
<p>接下来的这一小节我们将会介绍block和变数之间的互动。</p>
<blockquote>
<p>X.4.1 变数的型态</p>
<p>我们可以在block中遇到平常在函数中会遇到的变数类型：</p>
<p>l 全域（global）变数或是静态的区域变数（static local）。</p>
<p>l 全域的函数。</p>
<p>l 区域变数和由封闭领域（enclosing scope）传入的参数。</p>
<p>除了上述之外block额外支援了另外两种变数：</p>
<p>在函数内可以使用__block 变数，这些变数在block中是可被修改的。</p>
<p>汇入常数（const imports）。</p>
<p>此外，在方法的实作里，block可以使用Objective-C的实体变数（instance variable）。</p>
<p>下列的规则可以套用到在block中变数的使用：</p>
<p>可以存取全域变数和在同一领域（enclosing lexical scope）中的静态变数。</p>
<p>可以存取传入block的参数（使用方式和传入函数的参数相同）。</p>
<p>在同一领域的区域变数在block中将视为常数（const）。</p>
<p>可以存取在同一领域中以__block 为修饰词的变数。</p>
<p>在block中宣告的区域变数，使用方式和平常函数使用区域变数的方式相同。</p>
<p>下面的例子介绍了区域变数（上述第三点）的使用方式：</p>
</blockquote>
<p>   1:int x = 123 ;</p>
<p>   2:void (^printXAndY)( int ) = ^( int y)</p>
<p>   3:     {</p>
<p>   4: printf ( “%d %d\n” , x, y); </p>
<p>   5:     };</p>
<p>   6:// 将会印出123 456</p>
<p>   7:     printXAndY( 456 );</p>
<p>   8: 就如上面第三点所提到的，在上例中的int x = 123的变量x，在传入block后将视同常数，因此若我们在block中试着去修改x的值时就会产生错误，下面的例子将会无法通过编译： </p>
<p>   9:</p>
<p>  10:int x = 123 ;</p>
<p>  11:void (^printXAndY)( int ) = ^( int y)</p>
<p>  12: {</p>
<p>  13:// 下面这一行是错的，因为x 在这是一个常数不能被修改。</p>
<p>  14:     x = x + y;</p>
<p>  15:     printf ( “%d %d\n” , x, y); </p>
<p>  16:     };</p>
<blockquote>
<p>若在block中想要修改上面的变数x，必须将x宣告加上修饰词__block，请参考接下来这一小节的介绍。</p>
<p>X.4.2 __block 型态变数</p>
<p>我们可以藉由将一个由外部汇入block的变数放上修饰词<strong>block来让这个变数由唯读变成可以读和写，不过有一个限制就是传入的变数在记忆体中必须是一个占有固定长度记忆体的变数，</strong>block修饰词无法使用于像是变动长度的阵列这类不定长度的变数，请参考下面的范例：</p>
</blockquote>
<p>   1:// 加上__block 修饰词，所以可以在block 中被修改。</p>
<p>   2: __block int x = 123 ;</p>
<p>   3:void (^printXAndY)( int ) = ^( int y)</p>
<p>   4:     {</p>
<p>   5:         x = x + y; </p>
<p>   6: printf ( “%d %d\n” , x, y); </p>
<p>   7:     };</p>
<p>   8:// 将会印出579 456</p>
<p>   9:     printXAndY( 456 );</p>
<p>  10://x 将会变成　579;</p>
<p>  11: 下面我们使用一个范例来介绍各类型的变数和block之间的互动： </p>
<p>  12:</p>
<p>  13:extern NSInteger CounterGlobal;</p>
<p>  14:static NSInteger CounterStatic;</p>
<p>  15: {</p>
<p>  16: NSInteger localCounter = 42 ;</p>
<p>  17: __block char localCharacter;</p>
<p>  18:void (^aBlock)( void ) = ^( void )</p>
<p>  19:     {</p>
<p>  20:         ++ CounterGlobal ; //可以存取。</p>
<p>  21:         ++ CounterStatic ; //可以存取。　</p>
<p>  22: CounterGlobal = localCounter; //localCounter在block 建立时就不可变了。</p>
<p>  23:         localCharacter = ‘a’ ; //设定外面定义的localCharacter 变数。</p>
<p>  24:     };</p>
<p>  25:     ++localCounter; //不会影响的block 中的值。</p>
<p>  26:     localCharacter = ‘b’ ;</p>
<p>  27:     aBlock(); //执行block 的内容。</p>
<p>  28://执行完后，localCharachter 会变成’a’</p>
<p>  29: }</p>
<blockquote>
<p>X.4.3 物件和Block变数</p>
<p>Block 支援在Objective-C、C++物件和其他block中当作变数来使用，不过因为在大部分的情况我们都是使用Objective-C的撰写程式，因此在这一小节我们仅针对Objective-C的情况进行介绍，至于其他两种情况就留给有兴趣的读者再自行深入研究了。</p>
<p>x.4.3.1 Objective-C 物件</p>
<p>在拥有参考计数（reference-counted）的环境中，若我们在block中参考到Objective-C的物件，在一般的情况下它将会自动增加物件的参考计数，不过若以__block为修饰词的物件，参考计数则是不受影响。</p>
<p>如果我们在Objective-C的方法中使用block时，以下几个和记忆体管理的事是需要额外注意的：</p>
<p>l 若直接存取实体变数（instance variable），self的参考计数将被加1。</p>
<p>l 若透过变数存取实体变数的值，则只变数的参考计数将被加1。</p>
<p>以下程式码说明上面两种情况，在这个假设instanceVariable是实体变数：</p>
</blockquote>
<p>   1: dispatch_async (queue, ^{</p>
<p>   2:// 因为直接存取实体变数instanceVariable ，所以self 的retain count 会加１</p>
<p>   3: doSomethingWithObject (instanceVariable);</p>
<p>   4:     });</p>
<p>   5: id localVaribale = instanceVariable;</p>
<p>   6: dispatch_async (queue, ^{</p>
<p>   7://localVariable 是存取值，所以这时只有localVariable 的retain count 加１</p>
<p>   8://self 的　return count 　并不会增加。</p>
<p>   9: doSomethingWithObject (localVaribale);</p>
<p>  10:     });</p>
<p>X.5 使用Block</p>
<p>这一小节我们将会对block的使用方式做一些初步的介绍</p>
<blockquote>
<p>X.5.1 呼叫一个Block</p>
<p>当block宣告成一个变数时，我们可以像使用一般函数的方式来使用它，请参考下面两个范例：</p>
</blockquote>
<p>   1:int (^oneFrom)( int ) = ^( int anInt) {</p>
<p>   2:return anInt - 1 ;</p>
<p>   3:     };</p>
<p>   4: printf ( “1 from 10 is %d” , oneFrom( 10 ));</p>
<p>   5://结果会显示：1 from 10 is 9</p>
<p>   6:float (^distanceTraveled)( float , float , float ) = ^( float startingSpeed, float acceleration, float time)</p>
<p>   7:     {</p>
<p>   8:float distance = (startingSpeed <em> time) + ( 0.5 </em> acceleration <em> time </em> time);</p>
<p>   9:return distance;</p>
<p>  10:     };</p>
<p>  11:float howFar = distanceTraveled( 0.0 , 9.8 , 1.0 );</p>
<p>  12: //howFar会变成4.9</p>
<blockquote>
<p>在一般常见的情况中，若是将block当做是参数传入函数，我们通常会使用「内嵌」的方式来使用block。</p>
<p>X.5.2 将Block当作函数的参数</p>
<p>我们可以像使用一般函数使用参数的方式，将block以函数参数的型式传入函数中，在这种情况下，大多数我们使用block的方式将不会倾向宣告block而是直接以内嵌的方式来将block传入，这也是目前新版SDK中主流的做法，我们将补充前面章节的例子来说明：</p>
</blockquote>
<p>   1:char *myCharacters[ 3 ] = { “TomJohn” , “George” , “Charles Condomine” };</p>
<p>   2: qsort_b (myCharacters, 3 , sizeof ( char *),</p>
<p>   3:             ^( constvoid <em>l, constvoid </em>r)</p>
<p>   4:             {</p>
<p>   5:char <em>left = </em>( char **)l;</p>
<p>   6:char <em>right = </em>( char **)r;</p>
<p>   7:return strncmp (left, right, 1 );</p>
<p>   8:             } // 这里是block 的终点。</p>
<p>   9:             );</p>
<p>  10: // 最后的结果为：{“Charles Condomine”, “George”, “TomJohn”}</p>
<blockquote>
<p>在上面的例子中，block本身就是函数参数的一部分，在下一个例子中dispatch_apply函数中使用block，dispatch_apply的定义如下：</p>
</blockquote>
<p>   1:void</p>
<p>   2: dispatch_apply( size_t iterations, dispatch_queue_t queue, void (^block)( size_t ));</p>
<p>   3: 这个函数将一个block提交到发送伫列（dispatch queue）中来执行多重的呼叫，只有当伫列中的工作都执行完成后才会回传，这个函数拥有三个变数，而最后一个参数就是block ，请参考下面的范例： </p>
<p>   4:</p>
<p>   5: size_t count = 10 ;</p>
<p>   6: dispatch_queue_t queue =</p>
<p>   7: dispatch_get_global_queue ( DISPATCH_QUEUE_PRIORITY_DEFAULT , 0 );</p>
<p>   8: dispatch_apply (count, queue, ^( size_t i) {</p>
<p>   9: printf ( “%u\n” , i);</p>
<p>  10:     });</p>
<blockquote>
<p>X.5.3 将Block当作方法的参数</p>
<p>在SDK中提供了许多使用block的方法，我们可以像传递一般参数的方式来传递block，下面这个范例示范如何在一个阵列的前5笔资料中取出我们想要的资料的索引值：</p>
</blockquote>
<p>   1:// 所有的资料</p>
<p>   2: NSArray *array = [ NSArray arrayWithObjects : @”A” , @”B” , @”C” , @”A” , @”B” , @”Z” , @”G” , @”are” , @” Q” ,nil ];   </p>
<p>   3:// 我们只要这个集合内的资料</p>
<p>   4: NSSet *filterSet = [ NSSet setWithObjects : @”A” , @”B” , @”Z” , @”Q” , nil ];</p>
<p>   5: BOOL (^test)( id obj, NSUInteger idx, BOOL *stop);</p>
<p>   6: test = ^ ( id obj, NSUInteger idx, BOOL *stop) {</p>
<p>   7:// 只对前5 笔资料做检查</p>
<p>   8:if (idx &lt; 5 ) {</p>
<p>   9:if ([filterSet containsObject : obj]) {</p>
<p>  10:return YES ;</p>
<p>  11:               }</p>
<p>  12:       }</p>
<p>  13:return NO ;</p>
<p>  14: };</p>
<p>  15: NSIndexSet *indexes = [array indexesOfObjectsPassingTest :test];</p>
<p>  16: NSLog ( @”indexes: %@” , indexes);   </p>
<p>  17:// 结果：indexes: [number of indexes: 4 (in 2 ranges), indexes: (0-1 3-4)]</p>
<p>  18:// 前５笔资料中，有４笔符合条件，它们的索引值分别是0-1, 3-4</p>
<blockquote>
<p>X.5.4 该避免的使用方式</p>
<p>在下面的例子中，block是for回圈的区域变数因此在使用上必须避免将区域的block指定给外面宣告的block：</p>
</blockquote>
<p>   1:// 这是错误的范例，请勿在程式中使用这些语法!!</p>
<p>   2:void dontDoThis() {</p>
<p>   3:void (^blockArray[3])(void); // 3 个block 的阵列</p>
<p>   4:for (int i = 0; i &lt; 3; ++i) {</p>
<p>   5:         blockArray[i] = ^{ printf(“hello, %d\n”, i); };</p>
<p>   6:// 注意: 这个block 定义仅在for 回圈有效。</p>
<p>   7:     }</p>
<p>   8: }</p>
<p>   9:void dontDoThisEither() {</p>
<p>  10:void (^block)(void);</p>
<p>  11:int i = random():</p>
<p>  12:if (i &gt; 1000) {</p>
<p>  13:         block = ^{ printf(“got i at: %d\n”, i); };</p>
<p>  14:// 注意: 这个block 定义仅在if 后的两个大括号中有效。</p>
<p>  15:     }<br>  16:// …<br>  17: }</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alexzzn.github.io/2018/07/18/iOS/Block_OC_1/" data-id="cjjsawxh0005l1m536vyrhwz8" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-iOS/SwiftDate处理" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/18/iOS/SwiftDate处理/" class="article-date">
  <time datetime="2018-07-18T10:10:21.180Z" itemprop="datePublished">2018-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/18/iOS/SwiftDate处理/">SwiftDate处理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h4 id="swiftdate"><a href="#swiftdate" class="headerlink" title="swiftdate"></a>swiftdate</h4><p><code>`</code>swift<br>        // 获取当前date<br>        let date1 = Date.init()<br>        let data2 = “2015-07-26”.date(format: DateFormat.custom(“yyyy.mm.dd”), fromRegion: Region.Local())<br>        let date3 = DateInRegion.init(components: DateComponents.init(calendar: Calendar.autoupdatingCurrent, timeZone: TimeZone.current, era: 1, year: 2010, month: 1, day: 1, hour: 1, minute: 1, second: 1, nanosecond: 1, weekday: nil))<br>        // dataregion 修改时间元素值<br>        let date4 = date3! + 14.minutes + 12.seconds<br>        // 比较时间<br>        let bv = date3! &gt; date4<br>        // 时间起始值<br>        let date5 = date4.startOf(component: Calendar.Component.hour)<br>        let date6 = date4.endOfDay</p>
<pre><code>// 时间戳
let inter1 = TimeInterval.init(&quot;1244&quot;)!
let date7 = Date.init(timeIntervalSinceNow: inter1)
date7.inLocalRegion()


// 获取多个时间中的最靠前
let date8 = DateInRegion.oldestDate([date5,date6])


// 获取字符串
let date1Str = date1.string(format: DateFormat.custom(&quot;YYYY-MM-DD&quot;), in: Region.Local())
let dateStr1 = data2?.string(dateStyle: DateFormatter.Style.medium, timeStyle: DateFormatter.Style.short)
//
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alexzzn.github.io/2018/07/18/iOS/SwiftDate处理/" data-id="cjjsawxfe002f1m53cor3r72l" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-iOS/swift4 字符串" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/18/iOS/swift4 字符串/" class="article-date">
  <time datetime="2018-07-18T10:10:21.179Z" itemprop="datePublished">2018-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/18/iOS/swift4 字符串/">swift4 字符串</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> greeting = <span class="string">"Hello, world!"</span></span><br><span class="line"><span class="keyword">let</span> index = greeting.index(of: <span class="string">","</span>) ?? greeting.endIndex</span><br><span class="line"><span class="keyword">let</span> beginning = greeting[..&lt;index]</span><br><span class="line"><span class="comment">// beginning is "Hello"</span></span><br><span class="line"><span class="comment">//但是注意SubString可能会用到原来string的内存。官方建议是短时间使用，如果想要长时间保持，需要转为String</span></span><br><span class="line"><span class="comment">// Convert the result to a String for long-term storage.</span></span><br><span class="line"><span class="keyword">let</span> newString = <span class="type">String</span>(beginning)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>插入和移除字符<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var welcome = &quot;hello&quot;</span><br><span class="line">welcome.insert(&quot;!&quot;, at: welcome.endIndex)</span><br><span class="line">// welcome now equals &quot;hello!&quot;</span><br><span class="line"></span><br><span class="line">welcome.insert(contentsOf: &quot; there&quot;, at: welcome.index(before: welcome.endIndex))</span><br><span class="line">// welcome now equals &quot;hello there!&quot;</span><br><span class="line">welcome.remove(at: welcome.index(before: welcome.endIndex))</span><br><span class="line">// welcome now equals &quot;hello there&quot;</span><br><span class="line"></span><br><span class="line">let range = welcome.index(welcome.endIndex, offsetBy: -6)..&lt;welcome.endIndex</span><br><span class="line">welcome.removeSubrange(range)</span><br><span class="line">// welcome now equals &quot;hello&quot;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>One-sided Slicing<br>Swift 4 新增了一个语法糖 … 可以对字符串进行单侧边界取子串。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//Swift 3:</span><br><span class="line"></span><br><span class="line">let values = &quot;abcdefg&quot;</span><br><span class="line">let startSlicingIndex = values.index(values.startIndex, offsetBy: 3)</span><br><span class="line">let subvalues = values[startSlicingIndex..&lt;values.endIndex] // defg</span><br><span class="line"></span><br><span class="line">//Swift 4:</span><br><span class="line"></span><br><span class="line">let values = &quot;abcdefg&quot;</span><br><span class="line">let startSlicingIndex = values.index(values.startIndex, offsetBy: 3)</span><br><span class="line">let subvalues = values[startSlicingIndex...] // One-sided Slicing // defg</span><br></pre></td></tr></table></figure></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alexzzn.github.io/2018/07/18/iOS/swift4 字符串/" data-id="cjjsawxg1003l1m53yhubtu69" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-iOS/cocoapods 私有仓库" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/18/iOS/cocoapods 私有仓库/" class="article-date">
  <time datetime="2018-07-18T10:10:20.348Z" itemprop="datePublished">2018-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/18/iOS/cocoapods 私有仓库/">cocoapods 私有仓库</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p><a href="https://guides.cocoapods.org/syntax/podspec.html#vendored_frameworks" target="_blank" rel="noopener">官方文档</a></p>
<blockquote>
<p>首先同步git repo 仓库<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod repo add demo www.gitee.demo:jj/xx.git</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>新建私有仓库<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod lib create demo</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>查看repo列表<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod repo list</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>修改podspec 文件，注意summary，desc，git source 地址<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Pod::Spec.new <span class="keyword">do</span> <span class="params">|s|</span></span><br><span class="line">  s.name             = <span class="string">'ZZNTT'</span></span><br><span class="line">  s.version          = <span class="string">'0.1.1'</span></span><br><span class="line">  s.summary          = <span class="string">'描述文件'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This description is used to generate tags and improve search results.</span></span><br><span class="line"><span class="comment">#   * Think: What does it do? Why did you write it? What is the focus?</span></span><br><span class="line"><span class="comment">#   * Try to keep it short, snappy and to the point.</span></span><br><span class="line"><span class="comment">#   * Write the description between the DESC delimiters below.</span></span><br><span class="line"><span class="comment">#   * Finally, don't worry about the indent, CocoaPods strips it!</span></span><br><span class="line"></span><br><span class="line">  s.description      = <span class="string">&lt;&lt;-DESC</span></span><br><span class="line"><span class="string">  这是一个测试的DEMO</span></span><br><span class="line"><span class="string">                       DESC</span></span><br><span class="line"></span><br><span class="line">  s.homepage         = <span class="string">'https://gitee.com/izhongnan/ZZNTT'</span></span><br><span class="line">  <span class="comment"># s.screenshots     = 'www.example.com/screenshots_1', 'www.example.com/screenshots_2'</span></span><br><span class="line">  s.license          = &#123; <span class="symbol">:type</span> =&gt; <span class="string">'MIT'</span>, <span class="symbol">:file</span> =&gt; <span class="string">'LICENSE'</span> &#125;</span><br><span class="line">  s.author           = &#123; <span class="string">'ZZN'</span> =&gt; <span class="string">'dream_at@live.cn'</span> &#125;</span><br><span class="line">  s.source           = &#123; <span class="symbol">:git</span> =&gt; <span class="string">'https://gitee.com/izhongnan/ZZNTT.git'</span>, <span class="symbol">:tag</span> =&gt; s.version.to_s &#125;</span><br><span class="line">  <span class="comment"># s.social_media_url = 'https://twitter.com/&lt;TWITTER_USERNAME&gt;'</span></span><br><span class="line"></span><br><span class="line">  s.ios.deployment_target = <span class="string">'8.0'</span></span><br><span class="line">  s.requires_arc = <span class="literal">true</span>   </span><br><span class="line">  s.frameworks = <span class="string">'UIKit'</span>  </span><br><span class="line">  s.source_files = <span class="string">'ZZNTT/Classes/**/*'</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># s.resource_bundles = &#123;</span></span><br><span class="line">  <span class="comment">#   'ZZNTT' =&gt; ['ZZNTT/Assets/*.png']</span></span><br><span class="line">  <span class="comment"># &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># s.public_header_files = 'Pod/Classes/**/*.h'</span></span><br><span class="line">  <span class="comment"># s.frameworks = 'UIKit', 'MapKit'</span></span><br><span class="line">  <span class="comment"># s.dependency 'AFNetworking', '~&gt; 2.3'</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>commit 本地私有仓库，加入tag<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git add -A</span><br><span class="line">git commit -s -m &quot;Initial Commit of Library&quot;</span><br><span class="line">git remote add origin XXX.git</span><br><span class="line">git push origin master</span><br><span class="line"></span><br><span class="line">git tag 0.1.0</span><br><span class="line">git push --tags</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>验证文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pod lib lint</span><br><span class="line">pod lib lint --no-clean 查看错误详情</span><br><span class="line">pod lib lint --allow-warnings 允许警告(包括xcode编译的warning)</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>向Spec Repo提交podspec<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod repo push demo(本地repo) demo.podspec</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod &apos;demo&apos;, :git =&gt; &apos;www.gitee.demo:jj/xx.git&apos;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>注意问题</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1, swift库注意 SWIFT_VERSION 和 module_name</span><br><span class="line">2, pod spec lint 可以添加--allow-warnings</span><br><span class="line">3, storyboard，xib等资源文件可以打包成bundle后，通过s.resource_bundles引用</span><br><span class="line">4, 库中引用资源等，需要找到当前文件所在的bundle来引用</span><br><span class="line">	let moudleFileBundle = Bundle.init(for: self.classForCoder())</span><br><span class="line">	let img = UIImage.init(named: name, in: moudleFileBundle, compatibleWith: nil)</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alexzzn.github.io/2018/07/18/iOS/cocoapods 私有仓库/" data-id="cjjsawxfi002n1m53e47iwu4i" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-iOS/web和js交互小结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/18/iOS/web和js交互小结/" class="article-date">
  <time datetime="2018-07-18T10:10:20.338Z" itemprop="datePublished">2018-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/18/iOS/web和js交互小结/">web和js交互小结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <blockquote>
<p>iOS 7 引入 JSCore， iOS8 后引入WebKit，提供WKScriptMessageHandler</p>
</blockquote>
<ul>
<li>JSContext：给JavaScript提供运行的上下文环境,通过-evaluateScript:方法就可以执行一JS代码</li>
<li>JSValue：封装了JS与ObjC中的对应的类型，以及调用JS的API等</li>
<li>JSManagedValue：管理数据和方法的类</li>
<li>JSVirtualMachine：处理线程相关，使用较少</li>
<li>JSExport：这是一个协议，如果采用协议的方法交互，自己定义的协议必须遵守此协议，在协议中声明的API都会在JS中暴露出来，才能调用</li>
</ul>
<blockquote>
<p>ObjC调用JS</p>
</blockquote>
<ul>
<li>-(JSValue <em>)evaluateScript:(NSString </em>)script;方法就可以执行一段JavaScript脚本</li>
<li>-(JSValue <em>)callWithArguments:(NSArray </em>)arguments;方法可以反过来将参数传进去来调用方法</li>
<li><blockquote>
<p>JS调用OC</p>
</blockquote>
</li>
<li><p>Blcok</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">JSContext *context = [[JSContext alloc] init];</span><br><span class="line">// 定义一个block</span><br><span class="line">context[@&quot;fun1&quot;] = ^() &#123;</span><br><span class="line">               </span><br><span class="line">  NSArray *args = [JSContext currentArguments];</span><br><span class="line">  for (JSValue *jsVal in args) &#123;</span><br><span class="line">   NSLog(@&quot;%@&quot;, jsVal);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  JSValue *this = [JSContext currentThis];</span><br><span class="line">  NSLog(@&quot;this: %@&quot;,this);</span><br><span class="line">&#125;;</span><br><span class="line">// 调用js的fun1方法</span><br><span class="line"> [context evaluateScript:@&quot;fun1(&apos;arr&apos;, [a, b],&#123; a:&apos;b&apos;&#125;);&quot;];</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>建立模型 遵循 jsexport协议</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">MyJSModel</span>:<span class="title">JSExport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// show showAlert</span></span><br><span class="line">	<span class="function"><span class="keyword">func</span> <span class="title">showAlert</span><span class="params">(title:String,msg:String)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyJSModelManger</span>:<span class="title">MyJSModel</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> context:<span class="type">JSContext</span>?</span><br><span class="line">	<span class="keyword">var</span> webview:<span class="type">WKWebView</span>?</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 执行代理方法</span></span><br><span class="line">	<span class="function"><span class="keyword">func</span> <span class="title">showAlert</span><span class="params">(title:String,msg:String)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">debugPrint</span>(title,msg)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注入模型</p>
</blockquote>
<ul>
<li>定义代理协议（声明js要执行的方法）</li>
<li>遵守JSExport协议</li>
<li>实体类(MyJSModelManager)代理此协议(声明变量 JSContext，UIWebView)</li>
<li>注入模型<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">self.jsContext = [webView valueForKeyPath:@&quot;documentView.webView.mainFrame.javaScriptContext&quot;];</span><br><span class="line"></span><br><span class="line">MyJSModelManager *model = [MyJSModelManager new];</span><br><span class="line">self.jsContext[@&quot;mymodel&quot;] = model;</span><br><span class="line">model.jsContext = self.jsContext;</span><br><span class="line">model.webView = self.webView;</span><br><span class="line"> // 异常</span><br><span class="line"> self.jsContext.exceptionHandler =^(JSContext *context,JSValue *exceptionValue) &#123;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>web端调用</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// html5</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"margin-top: 100px"</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>JsToNative/h1&gt; </span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"show"</span> <span class="attr">onclick</span>=<span class="string">"mymodel.showAlert()"</span>&gt;</span> </span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alexzzn.github.io/2018/07/18/iOS/web和js交互小结/" data-id="cjjsawxg4003r1m53m7fkr6e9" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-Android/JAVA8 lambada表达式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/18/Android/JAVA8 lambada表达式/" class="article-date">
  <time datetime="2018-07-18T10:10:04.531Z" itemprop="datePublished">2018-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android/">Android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/18/Android/JAVA8 lambada表达式/">JAVA8 lambada表达式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h4 id="lambada表达式"><a href="#lambada表达式" class="headerlink" title="lambada表达式"></a>lambada表达式</h4><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> defaultConfig &#123;</span><br><span class="line">        jackOptions &#123;</span><br><span class="line">            enabled <span class="keyword">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">compileOptions &#123;</span><br><span class="line">        targetCompatibility <span class="number">1.8</span></span><br><span class="line">        sourceCompatibility <span class="number">1.8</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//声明接口</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">showLab</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//要执行的闭包函数声明</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">backGound</span><span class="params">(<span class="keyword">int</span> a)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//实现闭包函数的方法</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    lab:闭包的声明的实例</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">implementLam</span><span class="params">(showLab lab)</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">2</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//可以对闭包回调 返回值 操作</span></span><br><span class="line">    <span class="keyword">int</span> b = lab.backGound(a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//实现lambada函数</span></span><br><span class="line"></span><br><span class="line">implementLam((a)-&gt;&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//闭包返回值</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alexzzn.github.io/2018/07/18/Android/JAVA8 lambada表达式/" data-id="cjjsawxg900431m53xco0swqx" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-Android/java8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/18/Android/java8/" class="article-date">
  <time datetime="2018-07-18T10:08:32.069Z" itemprop="datePublished">2018-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android/">Android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/18/Android/java8/">java8</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p><code>`</code>java<br>import com.sun.istack.internal.Nullable;<br>import com.sun.xml.internal.xsom.impl.scd.Iterators;<br>import java.time.LocalDate;<br>import java.util.*;<br>import java.util.function.Supplier;<br>import java.util.stream.Stream;</p>
<p>import static java.util.Optional.ofNullable;</p>
<p>interface Success {<br>    void succ(String string);<br>}<br>interface Fail {<br>    void fail(String string);<br>}</p>
<p>public class Main {</p>
<pre><code>static String test(@Nullable String a) {

    Optional&lt;String&gt; optb = Optional.ofNullable(a);
    String realValue = optb.orElse(&quot;NULL&quot;);

    return realValue;
}

public static void main(String[] args) {

    String str = test(null);
    System.out.println(str);

    JavaBeans javaBeans = new JavaBeans();
    javaBeans.request((succ)-&gt;{

        System.out.println(succ);
    },(fail)-&gt;{
        System.out.println(fail);
    });

    String[] listStr = {&quot;1&quot;,&quot;2&quot;,&quot;3&quot;};
    Arrays.sort(listStr,String::compareToIgnoreCase);
    System.out.println(&quot;Hello World!&quot;);

    List&lt;String&gt; strings = new ArrayList&lt;String&gt;();
    Collections.addAll(strings,&quot;1&quot;,&quot;2&quot;,&quot;3&quot;);
    //
</code></pre><p>//        Person person = new Person();<br>//        String[] stringArray = {“1”,”2”};<br>//<br>////        Collections.sort(stringArray, (Comparator<string>) (o1, o2) -&gt; 0);<br>//        Collections.reverse(strings);<br>        Collections.sort(strings, (o1,o2)-&gt;{</string></p>
<pre><code>    int code = o1.hashCode();
    return 2;
});
//Stream是元素的集合
System.out.println(strings);
strings.stream().filter(value-&gt;{

    if ( value.isEmpty() == true) {
        return  false;
    }
    return true;
}).map(strs -&gt;{

    return strs+&quot;map&quot;;
}).forEach(JavaBeans::setName);

//用 Collectors 来进行 reduction 操作
</code></pre><p>//        Map&lt;Integer,List<person>&gt; personGroups =</person></p>
<pre><code>//自定义Supplier
Stream&lt;Person&gt; streamPerson = Stream.generate(new Supplier&lt;Person&gt;() {


    @Override
    public Person get() {

        Random seed = new Random();
        Integer randomInt = seed.nextInt(100);
        return new Person(&quot;名字&quot; + randomInt.toString(),randomInt.toString());
    }
}).limit(10);

streamPerson.forEach(person -&gt; {

    System.out.println(&quot;Supplier::person-&gt;&quot;+person.name+ &quot;:&quot; + person.age);
});


//自生成 10 个随机整数
Random seed = new Random();
</code></pre><p>//        int random = seed.nextInt(10);<br>        Supplier<integer> random = seed::nextInt;</integer></p>
<pre><code>    Stream.generate(random).limit(10).forEach(value-&gt;{
        System.out.println(&quot;我是随机数：：&quot;+value.toString());
    });
}
//
class PersonSupplier implements Supplier&lt;Person&gt; {

    private int index = 0;
    private Random random = new Random();

    @Override
    public Person get() {
        Integer randomInt = random.nextInt();
        randomInt.toString();
        Stream ss = Stream.generate(random::doubles);
        return new Person(randomInt.toString(),&quot;11&quot;);
    }
}
</code></pre><p>}</p>
<p>//<br>class JavaBeans implements TestNew {</p>
<pre><code>public String string = &quot;test&quot;;

static public int test() {
    return 0;
}
static void setName(String name) {

    System.out.println(name);
}


//
void request(@Nullable Success success,@Nullable Fail fail) {

    if (true) {

        success.succ(&quot;闭包回掉：succ&quot;);
    } else {

        fail.fail(&quot;闭包回掉：fail&quot;);
    }
}

@Override
public void testInterface() {
    //
}
</code></pre><p>}<br>interface TestNew {</p>
<pre><code>void testInterface();
</code></pre><p>}<br>//<br>class Person {<br>    //<br>    public enum Sex{<br>        MALE,FEMALE<br>    }<br>    String name;<br>    String age;</p>
<pre><code>Person(String name,String age) {

    this.name = name;
    this.age = age;
}
</code></pre><p>}</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://Alexzzn.github.io/2018/07/18/Android/java8/" data-id="cjjsawxgd004c1m53ardvt1rs" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/3/">下一页&raquo;</a>
  </nav>
</section>
           
    <aside id="sidebar">
  
    

  
    
  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title recent-posts">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/07/19/Web/mysql/">mysql</a>
          </li>
        
          <li>
            <a href="/2018/07/19/Server/字符串/">字符串</a>
          </li>
        
          <li>
            <a href="/2018/07/19/Web/mysql基本语句/">mysql基本语句</a>
          </li>
        
          <li>
            <a href="/2018/07/18/iOS/java注解/">java注解</a>
          </li>
        
          <li>
            <a href="/2018/07/18/iOS/地图定位/">地图定位</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    

  
    
  
    <!--微信公众号二维码-->


  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2018 zzn&nbsp;|&nbsp;
      主题 <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      联系方式&nbsp;|&nbsp;youemail@outlook.com
    </div>
  </div>
</footer>
 <script src="/jquery/jquery.min.js"></script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      

  
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "e2fb4051c49842688ce669e634bc983f",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
    

  







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 <script src="/js/is.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/elevator.js"></script>
  </div>
</body>
</html>